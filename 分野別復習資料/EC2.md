## EC2

### EC2
- プレイスメントグループ
    - 単一のAZ内のインスタンスの論理的なグループ
    - ネットワークの待ち時間が短い、ネットワークのスループットが高い、またはその両方のメリットがあるアプリケーションに有効
- リザーブドインスタンス
    - 1年間または3年間の期間を決めて前払いすることで大幅に割引されるインスタンス購入方式
    - 使用しなくなった場合はマーケットプライスで販売可能
    - 価格メリットは、購入したリザーブドインスタンスの総数に基づいて、支払人アカウント（またはインスタンスを予約したアカウント）だけではなく、一括請求グループの一部であるすべてのアカウントに適用されるため、購入したリザーブドインスタンスの数だけその価格メリットが適用される（ただし、条件として、各アカウントが利用するインスタンスが同じゾーンの同じインスタンスタイプであることが必要）
- EC2インスタンスの複製方法
    - AMIを取得し、AMIから新しいEC2インスタンスの作成を行う。
    - 別リージョンの場合は、AMIを別リージョンにコピーすることで可能
- オンデマンドキャパシティー予約
    - 定期的なインスタンス利用を予約することが可能
- Dedicated Host
    - IAMユーザーやIAMグループが同じAWSアカウントに属していたとしても、**権限が異なる別のIAMユーザーやIAMグループとは物理サーバーを共有しない**
- ハードウェア専有インスタンス
    - ホストHＷのレベルで、他のAWSアカウントに属するインスタンスから物理的に分離される
    - **同じAWSアカウントのインスタンスとはHWを共有する可能性がある**
- ユーザーデータ
    - インスタンスを設定時にユーザーデータを設定することで、インスタンス起動時にスクリプトを実行できる
### Auto Scaling
- 静的オートスケーリング
    - 常にインスタンス数が一定数になるように保つ
- 動的オートスケーリング
    - 一定のCPU利用に応じてスケーリングされる
    - 簡易スケーリングポリシーよりもステップスケーリングポリシーが推奨されている
- 設定手順
    1. AMI作成
    1. 起動テンプレート設定
    1. AutoScalingグループの設定
- 起動時に問題が発生すると、起動グループ内の1つ以上のAuto Scalingプロセスを中断して再開する
### ELB
- Connection Draining
    - 既存の接続を開いたまま、登録解除または異常なインスタンスへのELBのリクエスト送信を停止することが可能
    - 登録解除または異常なインスタンスに対して行われた実行中のリクエストを完了するトラフィック処理を実施
- スティッキーセッション
    - ELBがサーバーにリクエストを振り分ける際にCookieを確認して特定のクライアントからのリクエストを特定のサーバに連続的に紐づけることができる